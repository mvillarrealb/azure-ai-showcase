databaseChangeLog:
  - changeSet:
      id: v_1_0_0
      author: "Marco Villarreal"
      comment: "Estructura inicial del sistema de gestión de créditos - tablas, índices y constraints básicos"
      sqlFile:
        encoding: utf8
        stripComments: true
        path: "classpath:/db/v_1_0_0/main.sql"
        endDelimiter: "$EXECUTE$"
  
  - changeSet:
      id: v_1_0_0_data
      author: "Marco Villarreal"
      comment: "Datos iniciales de productos financieros de crédito"
      contexts: dev,data-load
      sqlFile:
        encoding: utf8
        stripComments: true
        path: "classpath:/db/v_1_0_0/data.sql"
      rollback:
        sql: "DELETE FROM credit_products; DELETE FROM customers WHERE identity_document LIKE 'TEST%';"
        
  - changeSet:
      id: v_1_1_0
      author: "Marco Villarreal"
      comment: "Historial de empleo - tabla employment_history con relaciones y constraints"
      sqlFile:
        encoding: utf8
        stripComments: true
        path: "classpath:/db/v_1_1_0/main.sql"
        endDelimiter: "$EXECUTE$"
        
  - changeSet:
      id: v_1_1_0_data
      author: "Marco Villarreal"
      comment: "Datos de prueba para historial de empleo - casos de estabilidad y desempleo"
      contexts: dev,data-load
      sqlFile:
        encoding: utf8
        stripComments: true
        path: "classpath:/db/v_1_1_0/data.sql"
      rollback:
        sql: "DELETE FROM employment_history WHERE customer_id IN (SELECT id FROM customers WHERE identity_document LIKE 'EMP%');"
        
  - changeSet:
      id: v_1_2_0
      author: "Marco Villarreal"
      comment: "Limpieza de campos no utilizados - eliminación de credit_score, employment_type, risk_level"
      sqlFile:
        encoding: utf8
        stripComments: true
        path: "classpath:/db/v_1_2_0/main.sql"
        endDelimiter: "$EXECUTE$"