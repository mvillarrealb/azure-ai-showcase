databaseChangeLog:
  - changeSet:
      id: v_1_0_0
      author: "Marco Villarreal"
      comment: "Estructura inicial del sistema de gestión de créditos - tablas, índices y constraints básicos"
      sqlFile:
        encoding: utf8
        stripComments: true
        path: "classpath:/db/v_1_0_0/main.sql"
        endDelimiter: "$EXECUTE$"
  - changeSet:
      id: v_1_1_0
      author: "Marco Villarreal"
      comment: "Historial de empleo - tabla employment_history con relaciones y constraints"
      sqlFile:
        encoding: utf8
        stripComments: true
        path: "classpath:/db/v_1_1_0/main.sql"
        endDelimiter: "$EXECUTE$"

  - changeSet:
      id: v_1_2_0_fixed
      author: "Marco Villarreal"
      comment: "Limpieza de campos no utilizados - eliminación segura de credit_score, employment_type, risk_level"
      sqlFile:
        encoding: utf8
        stripComments: true
        path: "classpath:/db/v_1_2_0/main.sql"
        endDelimiter: "$EXECUTE$"
        
  - changeSet:
      id: v_1_3_0
      author: "Marco Villarreal"
      comment: "Gestión de Rankings/Clasificaciones - tabla ranks con índices y constraints para análisis semántico"
      sqlFile:
        encoding: utf8
        stripComments: true
        path: "classpath:/db/v_1_3_0/main.sql"
        endDelimiter: "$EXECUTE$"
        
  - changeSet:
      id: v_1_4_0_ai_search_data
      author: "Marco Villarreal"
      comment: "Datos de muestra para AI Search - 15 clientes tipo con historiales laborales por cada rango (BRONCE, PLATA, ORO, PLATINO, PREMIUM)"
      contexts: dev,data-load
      sqlFile:
        encoding: utf8
        stripComments: true
        path: "classpath:/db/v_1_4_0/data.sql"
      rollback:
        sql: "DELETE FROM employment_history WHERE customer_id IN (SELECT id FROM customers WHERE identity_document LIKE '10025%'); DELETE FROM customers WHERE identity_document LIKE '10025%';"